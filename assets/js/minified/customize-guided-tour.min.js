((n,s)=>{if(n&&n.customize){let i=n.customize;i.InspiroGuidedTourSteps=[],"undefined"!=typeof _wpCustomizeInspiroGuidedTourSteps&&s.extend(i.InspiroGuidedTourSteps,_wpCustomizeInspiroGuidedTourSteps),i.InspiroGuidedTour={$container:null,currentStep:-1,init(){this._setupUI()},_setupUI(){let t=this,e=s("body.wp-customizer .wp-full-overlay");this.$container=s("<div/>").addClass("ins-guided-tour"),e.prepend(this.$container),this._addEventListeners(),this.$container&&0<this.$container.length&&this.$container.css(s("body").hasClass("rtl")?"right":"left",s("#customize-controls").width()+10+"px").on("transitionend",function(){t.$container.addClass("ins-loaded")}),this._showNextStep(),s(document).on("click",".ins-guided-tour-step .ins-go-button",function(){return t._showNextStep(),!1}),s(document).on("click",".ins-guided-tour-step .ins-guided-tour-skip",function(){return 0===t.currentStep?t._hideTour(!0):t._showNextStep(),!1})},_addEventListeners(){let t=this;i.state("expandedSection").bind(function(){t._adjustPosition()}),i.state("expandedPanel").bind(function(){t._adjustPosition()})},_adjustPosition(){var t,e,n=this._getCurrentStep();n&&(this.$container.removeClass("ins-inside-section"),e=i.state("expandedSection").get(),t=i.state("expandedPanel").get(),e&&n.section===e.id?(this._moveContainer(s(e.container[1]).find(".customize-section-title")),this.$container.addClass("ins-inside-section")):!1===e&&!1===t?this._isTourHidden()?this._revealTour():(e=this._getSelector(n.section),this._moveContainer(e)):this._hideTour())},_hideTour(t){let e=this;var n;this._isTourHidden()||(n=this.$container.offset(),this.$container.css({transform:"",top:n.top}),s("body").addClass("ins-exiting").on("animationend.storefront webkitAnimationEnd.storefront",function(){s(this).removeClass("ins-exiting").off("animationend.storefront webkitAnimationEnd.storefront").addClass("ins-hidden"),e.$container.hide(),void 0!==t&&!0===t&&e._removeTour()}))},_revealTour(){let t=this;s("body").removeClass("ins-hidden"),t.$container.show();var e=this.$container.offset();let n=parseInt(e.top,10);s("body").addClass("ins-entering").on("animationend.storefront webkitAnimationEnd.storefront",function(){s(this).removeClass("ins-entering").off("animationend.storefront webkitAnimationEnd.storefront"),t.$container.css({top:"auto",transform:"translateY("+n+"px)"})})},_removeTour(){this.$container.remove()},_closeAllSections(){i.section.each(function(t){t.collapse({duration:0})}),i.panel.each(function(t){t.collapse({duration:0})})},_showNextStep(){var t,e;this._isLastStep()?this._hideTour(!0):(this._closeAllSections(),(t=this._getNextStep()).message=this._lineBreaksToParagraphs(t.message),e=n.template("ins-guided-tour-step"),this.$container.removeClass("ins-first-step"),0===this.currentStep&&(t.first_step=!0,this.$container.addClass("ins-first-step")),this._isLastStep()&&(t.last_step=!0,this.$container.addClass("ins-last-step")),this._moveContainer(this._getSelector(t.section)),this.$container.html(e(t)))},_moveContainer(t){let e=this;t&&(t=parseInt(t.offset().top,10)+t.height()/2-44,this.$container.addClass("ins-moving").css({transform:"translateY("+t+"px)"}).on("transitionend.storefront",function(){e.$container.removeClass("ins-moving"),e.$container.off("transitionend.storefront")}))},_getSelector(t){var e=i.section(t)?i.section(t):i.panel(t);return s(void 0!==e?e.container[0]:t)},_getCurrentStep(){return i.InspiroGuidedTourSteps[this.currentStep]},_getNextStep(){return this.currentStep=this.currentStep+1,i.InspiroGuidedTourSteps[this.currentStep]},_isTourHidden(){return!!s("body").hasClass("ins-hidden")},_isLastStep(){return!(this.currentStep+1<i.InspiroGuidedTourSteps.length)},_lineBreaksToParagraphs(t){return"<p>"+t.replace("\n\n","</p><p>")+"</p>"}},s(document).ready(function(){i.InspiroGuidedTour.init()})}})(window.wp,jQuery);